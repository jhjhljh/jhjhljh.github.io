webpackJsonp([1],{"1OCC":function(t,e){},"2LQY":function(t,e){},"73OE":function(t,e){},"9vuA":function(t,e){},NHnr:function(t,e,r){"use strict";function s(){for(var t=o()(this.availArray),e=!0,r=!0,s=[],a=JSON.parse(o()(this.finishArray)),i=this.progressSum,n=JSON.parse(t);!0===r;){for(var l=0;l<i;l++)if(e=!0,"false"===a[l]){for(var h=0;h<3;h++)if(this.needArray[l][h]>n[h]){e=!1;break}if(!1!==e){for(var u=0;u<3;u++)n[u]+=this.allocateArray[l][u],a[l]="true";s.push(l);break}}l===i&&(r=!1)}for(var c=0,p=0;p<i;p++)"false"===this.finishArray[p]&&c++;return s.length===c&&s}Object.defineProperty(e,"__esModule",{value:!0});var a=r("7+uW"),i={render:function(){this.$createElement;this._self._c;return this._m(0,!1,!1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header-wrapper"},[e("h1",[this._v("操作系统课设")]),this._v(" "),e("h2",[this._v("“银行家算法（Banker's Algorithm）”")]),this._v(" "),e("h3",[this._v("计科1班 - 3117006047 - 林加鸿")])])}]},n=r("VU/8")({},i,!1,function(t){r("9vuA")},null,null).exports,l=r("mvHQ"),o=r.n(l),h=r("Gu7T"),u=r.n(h),c={props:["originAvailArray","availArray","progressSum","toReset"],data:function(){return{inputMsg:{progressNeed:"",progressAllocate:"",sourceAdd:""}}},watch:{toReset:function(){this.inputMsg.progressNeed="",this.inputMsg.progressAllocate="",this.inputMsg.sourceAdd=""}},methods:{pSubmit:function(){if(8===this.progressSum)return this.msg({message:"已超过设置的进程最大数8，不能添加！！",type:"warning"}),!1;var t=this.inputMsg.progressNeed,e=this.inputMsg.progressAllocate;if(t=t.split(" "),e=e.split(" "),console.log(t,e),3!==t.length||3!==e.length)return this.msg({message:"输入格式错误，请重新输入！",type:"warning"}),!1;for(var r=0;r<t.length;r++)if(""===t[r])return this.msg({message:"输入项不能为空，请重新输入！",type:"warning"}),!1;for(var s=0;s<e.length;s++)if(""===e[s])return this.msg({message:"输入项不能为空，请重新输入！",type:"warning"}),!1;if("0"===t[0]&&"0"===t[1]&&"0"===t[2])return this.msg({message:"进程的最大需求量不能都为0",type:"warning"}),!1;for(var a=0;a<3;a++)if(t[a]<e[a])return this.msg({message:"进程请求分配的资源大于进程最大需求量！",type:"warning"}),!1;for(var i=0;i<3;i++)if(t[i]>this.originAvailArray[i])return this.msg({message:"进程最大需求量已经超过系统总资源",type:"warning"}),!1;for(var n=0;n<3;n++)if(e[n]>this.availArray[n])return this.msg({message:"进程需要分配的资源超过当前可用资源",type:"warning"}),!1;this.$emit("addProgress",[].concat(u()(t),u()(e)))},sSubmit:function(){var t=this.inputMsg.sourceAdd;if(3!==(t=t.split(" ")).length)return console.log("输入错误，请重新输入！"),this.msg({message:"输入错误，请重新输入！",type:"warning"}),!1;for(var e=0;e<t.length;e++)if(""===t[e])return console.log("输入项不能为空，请重新输入！"),this.msg({message:"输入项不能为空，请重新输入！",type:"warning"}),!1;this.$emit("addSource",t)},msg:function(t){this.$message(t)}}},p={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"input-msg"},[r("h3",{staticClass:"header"},[t._v("【说明】")]),t._v(" "),t._m(0,!1,!1),t._v(" "),r("h3",{staticClass:"header"},[t._v("【添加进程】")]),t._v(" "),r("div",[r("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.inputMsg}},[r("el-form-item",{attrs:{label:"进程最大需求量"}},[r("el-input",{attrs:{placeholder:"请用空格隔开"},model:{value:t.inputMsg.progressNeed,callback:function(e){t.$set(t.inputMsg,"progressNeed",e)},expression:"inputMsg.progressNeed"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"进程分配到的资源"}},[r("el-input",{attrs:{placeholder:"请用空格隔开"},model:{value:t.inputMsg.progressAllocate,callback:function(e){t.$set(t.inputMsg,"progressAllocate",e)},expression:"inputMsg.progressAllocate"}})],1),t._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:t.pSubmit}},[t._v("提交")])],1)],1)],1),t._v(" "),r("h3",{staticClass:"s-header"},[t._v("【添加资源】")]),t._v(" "),r("div",[r("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.inputMsg}},[r("el-form-item",{attrs:{label:"添加可分配资源"}},[r("el-input",{attrs:{placeholder:"请用空格隔开"},model:{value:t.inputMsg.sourceAdd,callback:function(e){t.$set(t.inputMsg,"sourceAdd",e)},expression:"inputMsg.sourceAdd"}})],1),t._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:t.sSubmit}},[t._v("提交")])],1)],1)],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("\n        在已有进程和资源的基础上，可动态增加进程和资源的总量"),e("br"),this._v(" 资源分为A、B、C三类"),e("br"),this._v("其中A:10、B:5、C:7\n    ")])}]},m={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"table-view"},[e("el-table",{attrs:{data:this.tableData,border:"","row-class-name":"animated fadeInUp","row-class-name":this.addBlue}},[e("el-table-column",{attrs:{prop:"index",label:"进程 / 资源"}}),this._v(" "),e("el-table-column",{attrs:{label:"最大需求量Max"}},[e("el-table-column",{attrs:{prop:"Max[0]",label:"A","min-width":"50px"}}),this._v(" "),e("el-table-column",{attrs:{prop:"Max[1]",label:"B","min-width":"50px"}}),this._v(" "),e("el-table-column",{attrs:{prop:"Max[2]",label:"C","min-width":"50px"}})],1),this._v(" "),e("el-table-column",{attrs:{label:"已分配资源Allocation"}},[e("el-table-column",{attrs:{prop:"Allocation[0]",label:"A","min-width":"50px"}}),this._v(" "),e("el-table-column",{attrs:{prop:"Allocation[1]",label:"B","min-width":"50px"}}),this._v(" "),e("el-table-column",{attrs:{prop:"Allocation[2]",label:"C","min-width":"50px"}})],1),this._v(" "),e("el-table-column",{attrs:{label:"需要资源Need"}},[e("el-table-column",{attrs:{prop:"Need[0]",label:"A","min-width":"50px"}}),this._v(" "),e("el-table-column",{attrs:{prop:"Need[1]",label:"B","min-width":"50px"}}),this._v(" "),e("el-table-column",{attrs:{prop:"Need[2]",label:"C","min-width":"50px"}})],1),this._v(" "),e("el-table-column",{attrs:{label:"可用资源Available"}},[e("el-table-column",{attrs:{prop:"Available[0]",label:"A","min-width":"50px"}}),this._v(" "),e("el-table-column",{attrs:{prop:"Available[1]",label:"B","min-width":"50px"}}),this._v(" "),e("el-table-column",{attrs:{prop:"Available[2]",label:"C","min-width":"50px"}})],1),this._v(" "),e("el-table-column",{attrs:{prop:"finish",label:"状态"}})],1)],1)},staticRenderFns:[]},g={props:["progressSum","finishArray","toReset"],data:function(){return{action:{progress:"",sourceNum:""}}},watch:{toReset:function(){this.action.progress="",this.action.sourceNum=""}},methods:{selectChange:function(t){this.$emit("selectChange",t)},aSubmit:function(){var t=this.action.sourceNum;if(t=t.split(" "),""===this.action.progress)return this.msg({message:"请选择发起资源请求的进程！",type:"warning"}),!1;if(3!==t.length)return console.log("输入错误，请重新输入！！"),this.msg({message:"输入错误，请重新输入！！",type:"warning"}),!1;for(var e=0;e<t.length;e++)if(""===t[e])return console.log("输入项不能为空，请重新输入！"),this.msg({message:"输入项不能为空，请重新输入！",type:"warning"}),!1;if("true"===this.finishArray[this.action.progress])return this.msg({message:"不能对已经完成的进程做发起资源请求的操作",type:"warning"}),!1;this.msg({message:"提交成功！",type:"success"}),this.$emit("pushData",[].concat(u()(t),[this.action.progress]))},aReset:function(){this.$emit("reset")},msg:function(t){this.$message(t)}}},d={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("h3",{staticClass:"header"},[t._v("【分配资源】")]),t._v(" "),r("div",[r("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.action}},[r("el-form-item",{attrs:{label:"进程"}},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:t.selectChange},model:{value:t.action.progress,callback:function(e){t.$set(t.action,"progress",e)},expression:"action.progress"}},t._l(t.progressSum,function(t){return r("el-option",{key:t-1,attrs:{label:"进程"+(t-1),value:t-1}})}))],1),t._v(" "),r("el-form-item",{attrs:{label:"分配的数量"}},[r("el-input",{attrs:{placeholder:"请用空格隔开"},model:{value:t.action.sourceNum,callback:function(e){t.$set(t.action,"sourceNum",e)},expression:"action.sourceNum"}})],1),t._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:t.aSubmit}},[t._v("提交")])],1),t._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:t.aReset}},[t._v("重置状态")])],1)],1)],1)])},staticRenderFns:[]},f={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"record-lists"},[r("h3",{staticClass:"s-header"},[t._v("【操作记录】")]),t._v(" "),r("ul",t._l(t.recordTip,function(e,s){return r("li",{key:s,staticClass:"animated fadeInUp"},[t._v("\n            "+t._s(e)+"\n        ")])}))])},staticRenderFns:[]},A={components:{InputMsg:r("VU/8")(c,p,!1,function(t){r("nRNo")},null,null).exports,TableView:r("VU/8")({props:["tableData","nowSelect"],methods:{addBlue:function(t){if(t.row,t.rowIndex===this.nowSelect)return"blue animated fadeIn"}}},m,!1,function(t){r("73OE")},null,null).exports,ActionOperate:r("VU/8")(g,d,!1,function(t){r("2LQY")},null,null).exports,RecordList:r("VU/8")({props:["recordTip"]},f,!1,function(t){r("fQHa")},null,null).exports},data:function(){return{originAvailArray:[10,5,7],progressSum:5,availArray:[3,3,2],maxArray:[[7,5,3],[3,2,2],[9,0,2],[2,2,2],[4,3,3]],allocateArray:[[0,1,0],[2,0,0],[3,0,2],[2,1,1],[0,0,2]],needArray:[[7,4,3],[1,2,2],[6,0,0],[0,1,1],[4,3,1]],finishArray:["false","false","false","false","false"],requestArray:[],progressIndex:"",recordTip:[],nowSelect:"",resetFlag:!1}},computed:{tableData:function(){for(var t=[],e=0;e<this.progressSum;e++)t.push({index:"进程"+e,Max:this.maxArray[e],Allocation:this.allocateArray[e],Need:this.needArray[e],Available:this.availArray,finish:this.finishArray[e]});return t}},created:function(){this.backUp={progressSum:this.progressSum,availArray:o()(this.availArray),maxArray:o()(this.maxArray),allocateArray:o()(this.allocateArray),needArray:o()(this.needArray),finishArray:o()(this.finishArray),originAvailArray:o()(this.originAvailArray)}},methods:{addAvail:function(t){var e=this;this.availArray=t.map(function(t,r){return Number(t)+e.availArray[r]}),this.originAvailArray=t.map(function(t,r){return Number(t)+e.originAvailArray[r]}),this.msg({message:"添加资源成功",type:"success"}),this.recordTip.push("【添加资源】：添加的资源分别是A："+Number(t[0])+"、B："+Number(t[1])+"、C："+Number(t[2])+"，\n                现可用资源分别是A："+this.availArray[0]+"、B："+this.availArray[1]+"、C："+this.availArray[2]+"。")},addProgress:function(t){var e=t.slice(0,3).map(function(t){return Number(t)}),r=t.slice(3,6).map(function(t){return Number(t)}),a=e.map(function(t,e){return t-r[e]});if(this.progressSum++,0===a[0]&&0===a[1]&&0===a[2])return this.finishArray.push("true"),this.maxArray.push(e),this.allocateArray.push([0,0,0]),this.needArray.push([0,0,0]),this.msg({message:"添加进程成功",type:"success"}),this.recordTip.push("【添加进程】：添加新的进程"+(this.progressSum-1)+"成功。"),!0;if(this.finishArray.push("false"),this.availArray=this.availArray.map(function(t,e){return t-r[e]}),this.maxArray.push(e),this.allocateArray.push(r),this.needArray.push(a),0===r[0]&&0===r[1]&&0===r[2])return this.msg({message:"添加进程成功",type:"success"}),this.recordTip.push("【添加进程】：添加新的进程"+(this.progressSum-1)+"成功。"),!0;var i=s.call(this);!1===i?(this.progressSum--,this.availArray=this.availArray.map(function(t,e){return t+r[e]}),this.maxArray.pop(),this.allocateArray.pop(),this.needArray.pop(),this.finishArray.pop(),this.msg({message:"添加进程使得系统处于不安全状态，添加失败！",type:"warning"}),this.recordTip.push("【添加进程】：添加新的进程"+this.progressSum+"失败咯，因为添加后系统处于不安全状态。")):(this.msg({message:"添加进程成功",type:"success"}),this.recordTip.push("【添加进程】：添加新的进程"+(this.progressSum-1)+"成功，系统此时安全序列为"+i))},actionCaculate:function(t){this.requestArray=t.slice(0,3).map(function(t){return Number(t)}),this.progressIndex=t[t.length-1];var e=function(t,e){for(var r=0;r<3;r++)if(e[r]>this.needArray[t][r])return{result:!1,reason:"所需资源数已超过它所宣布的最大值"};for(var s=0;s<3;s++)if(e[s]>this.availArray[s])return{result:!1,reason:"没有足够的资源可供分配"};for(var a=0;a<3;a++)this.availArray[a]-=e[a],this.allocateArray[t][a]+=e[a],this.needArray[t][a]-=e[a];if(0===this.needArray[t][0]&&0===this.needArray[t][1]&&0===this.needArray[t][2]){this.finishArray[t]="true";for(var i=0;i<3;i++)this.availArray[i]+=this.allocateArray[t][i],this.allocateArray[t][i]=0,this.needArray[t][i]=0}return{result:!0,message:"进行安全性算法的校验"}}.call(this,this.progressIndex,this.requestArray);if(!1===e.result)return this.requestArray=[],this.progressIndex="",this.msg({message:e.reason,type:"warning"}),!1;var r=s.call(this);if(!1===r){for(var a=0;a<3;a++)this.availArray[a]+=this.requestArray[a],this.allocateArray[this.progressIndex][a]-=this.requestArray[a],this.needArray[this.progressIndex][a]+=this.requestArray[a];this.msg({message:"因分配使得系统进入不安全状态，因此分配失败",type:"warning"}),this.recordTip.push("【响应进程资源请求】：响应进程"+this.progressIndex+"发起的资源分配请求失败，因为此时系统处于不安全状态，\n                    其请求的资源分别为A："+this.requestArray[0]+"、B："+this.requestArray[1]+"、C："+this.requestArray[2]+"。")}else this.msg({message:"分配成功",type:"success"}),this.availArray=this.availArray.slice(),this.maxArray=this.maxArray.slice(),this.allocateArray=this.allocateArray.slice(),this.needArray=this.needArray.slice(),this.finishArray=this.finishArray.slice(),this.recordTip.push("【响应进程资源请求】：响应进程"+this.progressIndex+"发起的资源分配请求成功，此时系统安全序列为"+r+"，\n                    其请求的资源分别为A："+this.requestArray[0]+"、B："+this.requestArray[1]+"、C："+this.requestArray[2]+"。");this.requestArray=[],this.progressIndex=""},reset:function(){this.progressSum=this.backUp.progressSum,this.availArray=JSON.parse(this.backUp.availArray),this.maxArray=JSON.parse(this.backUp.maxArray),this.allocateArray=JSON.parse(this.backUp.allocateArray),this.needArray=JSON.parse(this.backUp.needArray),this.finishArray=JSON.parse(this.backUp.finishArray),this.originAvailArray=JSON.parse(this.backUp.originAvailArray),this.msg({message:"重置完毕",type:"success"}),this.recordTip=[],this.nowSelect="",this.resetFlag=!this.resetFlag},selectChange:function(t){this.nowSelect=t},msg:function(t){this.$message(t)}}},v={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"m-wrapper"},[e("input-msg",{staticClass:"margin",attrs:{originAvailArray:this.originAvailArray,availArray:this.availArray,progressSum:this.progressSum,toReset:this.resetFlag},on:{addSource:this.addAvail,addProgress:this.addProgress}}),this._v(" "),e("table-view",{staticClass:"margin",attrs:{tableData:this.tableData,nowSelect:this.nowSelect}}),this._v(" "),e("action-operate",{staticClass:"margin",attrs:{progressSum:this.progressSum,finishArray:this.finishArray,toReset:this.resetFlag},on:{selectChange:this.selectChange,pushData:this.actionCaculate,reset:this.reset}}),this._v(" "),e("record-list",{staticClass:"margin",attrs:{recordTip:this.recordTip}})],1)},staticRenderFns:[]},y={components:{MHeader:n,MWrapper:r("VU/8")(A,v,!1,function(t){r("g06k")},null,null).exports}},b={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"m-wrapper"},[e("m-header"),this._v(" "),e("m-wrapper")],1)},staticRenderFns:[]},_=r("VU/8")(y,b,!1,function(t){r("1OCC")},null,null).exports,x=(r("oPmM"),r("zL8q")),w=r.n(x);r("tvR6");a.default.use(w.a),a.default.config.productionTip=!1,new a.default({el:"#app",template:"<App/>",components:{App:_}})},fQHa:function(t,e){},g06k:function(t,e){},nRNo:function(t,e){},oPmM:function(t,e){},tvR6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.7dd099f2b8beb9b1f78a.js.map