webpackJsonp([1],{"1OCC":function(e,r){},"2LQY":function(e,r){},"5aCo":function(e,r){},NHnr:function(e,r,t){"use strict";function s(){for(var e=o()(this.availArray),r=!0,t=!0,s=[],a=JSON.parse(o()(this.finishArray)),i=this.progressSum,n=JSON.parse(e);!0===t;){for(var l=0;l<i;l++)if(r=!0,"false"===a[l]){for(var h=0;h<3;h++)if(this.needArray[l][h]>n[h]){r=!1;break}if(!1!==r){for(var c=0;c<3;c++)n[c]+=this.allocateArray[l][c],a[l]="true";s.push(l);break}}l===i&&(t=!1)}for(var u=0,p=0;p<i;p++)"false"===this.finishArray[p]&&u++;return s.length===u&&s}Object.defineProperty(r,"__esModule",{value:!0});var a=t("7+uW"),i={render:function(){this.$createElement;this._self._c;return this._m(0,!1,!1)},staticRenderFns:[function(){var e=this.$createElement,r=this._self._c||e;return r("div",{staticClass:"header-wrapper"},[r("h1",[this._v("操作系统课设")]),this._v(" "),r("h2",[this._v("“银行家算法”")]),this._v(" "),r("h3",[this._v("计科1班 - 3117006047 - 林加鸿")])])}]},n=t("VU/8")({},i,!1,function(e){t("gkC0")},null,null).exports,l=t("mvHQ"),o=t.n(l),h=t("Gu7T"),c=t.n(h),u={props:["originAvailArray","availArray","progressSum","toReset"],data:function(){return{inputMsg:{progressNeed:"",progressAllocate:"",sourceAdd:""}}},watch:{toReset:function(){this.inputMsg.progressNeed="",this.inputMsg.progressAllocate="",this.inputMsg.sourceAdd=""}},methods:{pSubmit:function(){if(8===this.progressSum)return this.msg({message:"已超过设置的进程最大数8，不能添加！！",type:"warning"}),!1;var e=this.inputMsg.progressNeed,r=this.inputMsg.progressAllocate;if(e=e.split(" "),r=r.split(" "),console.log(e,r),3!==e.length||3!==r.length)return this.msg({message:"输入格式错误，请重新输入！",type:"warning"}),!1;for(var t=0;t<e.length;t++)if(""===e[t])return this.msg({message:"输入项不能为空，请重新输入！",type:"warning"}),!1;for(var s=0;s<r.length;s++)if(""===r[s])return this.msg({message:"输入项不能为空，请重新输入！",type:"warning"}),!1;if("0"===e[0]&&"0"===e[1]&&"0"===e[2])return this.msg({message:"进程的最大需求量不能都为0",type:"warning"}),!1;for(var a=0;a<3;a++)if(e[a]<r[a])return this.msg({message:"进程请求分配的资源大于进程最大需求量！",type:"warning"}),!1;for(var i=0;i<3;i++)if(e[i]>this.originAvailArray[i])return this.msg({message:"进程最大需求量已经超过系统总资源",type:"warning"}),!1;for(var n=0;n<3;n++)if(r[n]>this.availArray[n])return this.msg({message:"进程需要分配的资源超过当前可用资源",type:"warning"}),!1;this.$emit("addProgress",[].concat(c()(e),c()(r)))},sSubmit:function(){var e=this.inputMsg.sourceAdd;if(3!==(e=e.split(" ")).length)return console.log("输入错误，请重新输入！"),this.msg({message:"输入错误，请重新输入！",type:"warning"}),!1;for(var r=0;r<e.length;r++)if(""===e[r])return console.log("输入项不能为空，请重新输入！"),this.msg({message:"输入项不能为空，请重新输入！",type:"warning"}),!1;this.$emit("addSource",e)},msg:function(e){this.$message(e)}}},p={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"input-msg"},[t("h3",{staticClass:"header"},[e._v("【说明】")]),e._v(" "),e._m(0,!1,!1),e._v(" "),t("h3",{staticClass:"header"},[e._v("【添加进程】")]),e._v(" "),t("div",[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.inputMsg}},[t("el-form-item",{attrs:{label:"进程最大需求量"}},[t("el-input",{attrs:{placeholder:"请用空格隔开"},model:{value:e.inputMsg.progressNeed,callback:function(r){e.$set(e.inputMsg,"progressNeed",r)},expression:"inputMsg.progressNeed"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"进程分配到的资源"}},[t("el-input",{attrs:{placeholder:"请用空格隔开"},model:{value:e.inputMsg.progressAllocate,callback:function(r){e.$set(e.inputMsg,"progressAllocate",r)},expression:"inputMsg.progressAllocate"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.pSubmit}},[e._v("提交")])],1)],1)],1),e._v(" "),t("h3",{staticClass:"s-header"},[e._v("【添加资源】")]),e._v(" "),t("div",[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.inputMsg}},[t("el-form-item",{attrs:{label:"添加可分配资源"}},[t("el-input",{attrs:{placeholder:"请用空格隔开"},model:{value:e.inputMsg.sourceAdd,callback:function(r){e.$set(e.inputMsg,"sourceAdd",r)},expression:"inputMsg.sourceAdd"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.sSubmit}},[e._v("提交")])],1)],1)],1)])},staticRenderFns:[function(){var e=this.$createElement,r=this._self._c||e;return r("p",[this._v("\n        基于原始已存在的进程和资源，可以动态增加进程和资源的总量"),r("br"),this._v(" 资源分为A、B、C三类，其中对应的总量分别为10、5、7。\n    ")])}]},m={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"table-view"},[t("el-table",{attrs:{data:e.tableData,border:"","row-class-name":"animated fadeInUp","row-class-name":e.addBlue}},[t("el-table-column",{attrs:{prop:"index",label:"进程 / 资源"}}),e._v(" "),t("el-table-column",{attrs:{label:"最大需求量Max"}},[t("el-table-column",{attrs:{prop:"Max[0]",label:"A","min-width":"50px"}}),e._v(" "),t("el-table-column",{attrs:{prop:"Max[1]",label:"B","min-width":"50px"}}),e._v(" "),t("el-table-column",{attrs:{prop:"Max[2]",label:"C","min-width":"50px"}})],1),e._v(" "),t("el-table-column",{attrs:{label:"已分配资源Allocation"}},[t("el-table-column",{attrs:{prop:"Allocation[0]",label:"A","min-width":"50px"}}),e._v(" "),t("el-table-column",{attrs:{prop:"Allocation[1]",label:"B","min-width":"50px"}}),e._v(" "),t("el-table-column",{attrs:{prop:"Allocation[2]",label:"C","min-width":"50px"}})],1),e._v(" "),t("el-table-column",{attrs:{label:"需要资源Need"}},[t("el-table-column",{attrs:{prop:"Need[0]",label:"A","min-width":"50px"}}),e._v(" "),t("el-table-column",{attrs:{prop:"Need[1]",label:"B","min-width":"50px"}}),e._v(" "),t("el-table-column",{attrs:{prop:"Need[2]",label:"C","min-width":"50px"}})],1),e._v(" "),t("el-table-column",{attrs:{label:"可用资源Available"}},[t("el-table-column",{attrs:{prop:"Available[0]",label:"A","min-width":"50px"}}),e._v(" "),t("el-table-column",{attrs:{prop:"Available[1]",label:"B","min-width":"50px"}}),e._v(" "),t("el-table-column",{attrs:{prop:"Available[2]",label:"C","min-width":"50px"}})],1),e._v(" "),t("el-table-column",{attrs:{prop:"finish",label:"状态"}})],1)],1)},staticRenderFns:[]},g={props:["progressSum","finishArray","toReset"],data:function(){return{action:{progress:"",sourceNum:""}}},watch:{toReset:function(){this.action.progress="",this.action.sourceNum=""}},methods:{selectChange:function(e){this.$emit("selectChange",e)},aSubmit:function(){var e=this.action.sourceNum;if(e=e.split(" "),""===this.action.progress)return this.msg({message:"请选择发起资源请求的进程！",type:"warning"}),!1;if(3!==e.length)return console.log("输入错误，请重新输入！！"),this.msg({message:"输入错误，请重新输入！！",type:"warning"}),!1;for(var r=0;r<e.length;r++)if(""===e[r])return console.log("输入项不能为空，请重新输入！"),this.msg({message:"输入项不能为空，请重新输入！",type:"warning"}),!1;if("true"===this.finishArray[this.action.progress])return this.msg({message:"不能对已经完成的进程做发起资源请求的操作",type:"warning"}),!1;this.msg({message:"提交成功！",type:"success"}),this.$emit("pushData",[].concat(c()(e),[this.action.progress]))},aReset:function(){this.$emit("reset")},msg:function(e){this.$message(e)}}},d={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("h3",{staticClass:"header"},[e._v("【分配资源】")]),e._v(" "),t("div",[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.action}},[t("el-form-item",{attrs:{label:"进程"}},[t("el-select",{attrs:{placeholder:"请选择"},on:{change:e.selectChange},model:{value:e.action.progress,callback:function(r){e.$set(e.action,"progress",r)},expression:"action.progress"}},e._l(e.progressSum,function(e){return t("el-option",{key:e-1,attrs:{label:"进程"+(e-1),value:e-1}})}))],1),e._v(" "),t("el-form-item",{attrs:{label:"分配的数量"}},[t("el-input",{attrs:{placeholder:"请用空格隔开"},model:{value:e.action.sourceNum,callback:function(r){e.$set(e.action,"sourceNum",r)},expression:"action.sourceNum"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.aSubmit}},[e._v("提交")])],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.aReset}},[e._v("重置状态")])],1)],1)],1)])},staticRenderFns:[]},f={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"record-lists"},[t("h3",{staticClass:"s-header"},[e._v("【操作记录】")]),e._v(" "),t("ul",e._l(e.recordTip,function(r,s){return t("li",{key:s,staticClass:"animated fadeInUp"},[e._v("\n            "+e._s(r)+"\n        ")])}))])},staticRenderFns:[]},A={components:{InputMsg:t("VU/8")(u,p,!1,function(e){t("5aCo")},null,null).exports,TableView:t("VU/8")({props:["tableData","nowSelect"],methods:{addBlue:function(e){if(e.row,e.rowIndex===this.nowSelect)return"blue animated fadeIn"}}},m,!1,function(e){t("V9Y2")},null,null).exports,ActionOperate:t("VU/8")(g,d,!1,function(e){t("2LQY")},null,null).exports,RecordList:t("VU/8")({props:["recordTip"]},f,!1,function(e){t("fQHa")},null,null).exports},data:function(){return{originAvailArray:[10,5,7],progressSum:5,availArray:[3,3,2],maxArray:[[7,5,3],[3,2,2],[9,0,2],[2,2,2],[4,3,3]],allocateArray:[[0,1,0],[2,0,0],[3,0,2],[2,1,1],[0,0,2]],needArray:[[7,4,3],[1,2,2],[6,0,0],[0,1,1],[4,3,1]],finishArray:["false","false","false","false","false"],requestArray:[],progressIndex:"",recordTip:[],nowSelect:"",resetFlag:!1}},computed:{tableData:function(){for(var e=[],r=0;r<this.progressSum;r++)e.push({index:"进程"+r,Max:this.maxArray[r],Allocation:this.allocateArray[r],Need:this.needArray[r],Available:this.availArray,finish:this.finishArray[r]});return e}},created:function(){this.backUp={progressSum:this.progressSum,availArray:o()(this.availArray),maxArray:o()(this.maxArray),allocateArray:o()(this.allocateArray),needArray:o()(this.needArray),finishArray:o()(this.finishArray),originAvailArray:o()(this.originAvailArray)}},methods:{addAvail:function(e){var r=this;this.availArray=e.map(function(e,t){return Number(e)+r.availArray[t]}),this.originAvailArray=e.map(function(e,t){return Number(e)+r.originAvailArray[t]}),this.msg({message:"添加资源成功",type:"success"}),this.recordTip.push("【添加资源】：添加的资源分别是A："+Number(e[0])+"、B："+Number(e[1])+"、C："+Number(e[2])+"，\n                现可用资源分别是A："+this.availArray[0]+"、B："+this.availArray[1]+"、C："+this.availArray[2]+"。")},addProgress:function(e){var r=e.slice(0,3).map(function(e){return Number(e)}),t=e.slice(3,6).map(function(e){return Number(e)}),a=r.map(function(e,r){return e-t[r]});if(this.progressSum++,0===a[0]&&0===a[1]&&0===a[2])return this.finishArray.push("true"),this.maxArray.push(r),this.allocateArray.push([0,0,0]),this.needArray.push([0,0,0]),this.msg({message:"添加进程成功",type:"success"}),this.recordTip.push("【添加进程】：添加新的进程"+(this.progressSum-1)+"成功。"),!0;if(this.finishArray.push("false"),this.availArray=this.availArray.map(function(e,r){return e-t[r]}),this.maxArray.push(r),this.allocateArray.push(t),this.needArray.push(a),0===t[0]&&0===t[1]&&0===t[2])return this.msg({message:"添加进程成功",type:"success"}),this.recordTip.push("【添加进程】：添加新的进程"+(this.progressSum-1)+"成功。"),!0;var i=s.call(this);!1===i?(this.progressSum--,this.availArray=this.availArray.map(function(e,r){return e+t[r]}),this.maxArray.pop(),this.allocateArray.pop(),this.needArray.pop(),this.finishArray.pop(),this.msg({message:"添加进程使得系统处于不安全状态，添加失败！",type:"warning"}),this.recordTip.push("【添加进程】：添加新的进程"+this.progressSum+"失败咯，因为添加后系统处于不安全状态。")):(this.msg({message:"添加进程成功",type:"success"}),this.recordTip.push("【添加进程】：添加新的进程"+(this.progressSum-1)+"成功，系统此时安全序列为"+i))},actionCaculate:function(e){this.requestArray=e.slice(0,3).map(function(e){return Number(e)}),this.progressIndex=e[e.length-1];var r=function(e,r){for(var t=0;t<3;t++)if(r[t]>this.needArray[e][t])return{result:!1,reason:"所需资源数已超过它所宣布的最大值"};for(var s=0;s<3;s++)if(r[s]>this.availArray[s])return{result:!1,reason:"没有足够的资源可供分配"};for(var a=0;a<3;a++)this.availArray[a]-=r[a],this.allocateArray[e][a]+=r[a],this.needArray[e][a]-=r[a];if(0===this.needArray[e][0]&&0===this.needArray[e][1]&&0===this.needArray[e][2]){this.finishArray[e]="true";for(var i=0;i<3;i++)this.availArray[i]+=this.allocateArray[e][i],this.allocateArray[e][i]=0,this.needArray[e][i]=0}return{result:!0,message:"进行安全性算法的校验"}}.call(this,this.progressIndex,this.requestArray);if(!1===r.result)return this.requestArray=[],this.progressIndex="",this.msg({message:r.reason,type:"warning"}),!1;var t=s.call(this);if(!1===t){for(var a=0;a<3;a++)this.availArray[a]+=this.requestArray[a],this.allocateArray[this.progressIndex][a]-=this.requestArray[a],this.needArray[this.progressIndex][a]+=this.requestArray[a];this.msg({message:"因分配使得系统进入不安全状态，因此分配失败",type:"warning"}),this.recordTip.push("【响应进程资源请求】：响应进程"+this.progressIndex+"发起的资源分配请求失败，因为此时系统处于不安全状态，\n                    其请求的资源分别为A："+this.requestArray[0]+"、B："+this.requestArray[1]+"、C："+this.requestArray[2]+"。")}else this.msg({message:"分配成功",type:"success"}),this.availArray=this.availArray.slice(),this.maxArray=this.maxArray.slice(),this.allocateArray=this.allocateArray.slice(),this.needArray=this.needArray.slice(),this.finishArray=this.finishArray.slice(),this.recordTip.push("【响应进程资源请求】：响应进程"+this.progressIndex+"发起的资源分配请求成功，此时系统安全序列为"+t+"，\n                    其请求的资源分别为A："+this.requestArray[0]+"、B："+this.requestArray[1]+"、C："+this.requestArray[2]+"。");this.requestArray=[],this.progressIndex=""},reset:function(){this.progressSum=this.backUp.progressSum,this.availArray=JSON.parse(this.backUp.availArray),this.maxArray=JSON.parse(this.backUp.maxArray),this.allocateArray=JSON.parse(this.backUp.allocateArray),this.needArray=JSON.parse(this.backUp.needArray),this.finishArray=JSON.parse(this.backUp.finishArray),this.originAvailArray=JSON.parse(this.backUp.originAvailArray),this.msg({message:"重置完毕",type:"success"}),this.recordTip=[],this.nowSelect="",this.resetFlag=!this.resetFlag},selectChange:function(e){this.nowSelect=e},msg:function(e){this.$message(e)}}},y={render:function(){var e=this.$createElement,r=this._self._c||e;return r("div",{staticClass:"m-wrapper"},[r("input-msg",{staticClass:"margin",attrs:{originAvailArray:this.originAvailArray,availArray:this.availArray,progressSum:this.progressSum,toReset:this.resetFlag},on:{addSource:this.addAvail,addProgress:this.addProgress}}),this._v(" "),r("table-view",{staticClass:"margin",attrs:{tableData:this.tableData,nowSelect:this.nowSelect}}),this._v(" "),r("action-operate",{staticClass:"margin",attrs:{progressSum:this.progressSum,finishArray:this.finishArray,toReset:this.resetFlag},on:{selectChange:this.selectChange,pushData:this.actionCaculate,reset:this.reset}}),this._v(" "),r("record-list",{staticClass:"margin",attrs:{recordTip:this.recordTip}})],1)},staticRenderFns:[]},v={components:{MHeader:n,MWrapper:t("VU/8")(A,y,!1,function(e){t("g06k")},null,null).exports}},b={render:function(){var e=this.$createElement,r=this._self._c||e;return r("div",{staticClass:"m-wrapper"},[r("m-header"),this._v(" "),r("m-wrapper")],1)},staticRenderFns:[]},_=t("VU/8")(v,b,!1,function(e){t("1OCC")},null,null).exports,x=(t("oPmM"),t("zL8q")),w=t.n(x);t("tvR6");a.default.use(w.a),a.default.config.productionTip=!1,new a.default({el:"#app",template:"<App/>",components:{App:_}})},V9Y2:function(e,r){},fQHa:function(e,r){},g06k:function(e,r){},gkC0:function(e,r){},oPmM:function(e,r){},tvR6:function(e,r){}},["NHnr"]);
//# sourceMappingURL=app.2f369c77042515cc7253.js.map